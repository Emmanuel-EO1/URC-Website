{% load static %}
{% load humanize %}

<form action="{% url 'listings' %}" method="GET">
    <div class="row g-3 p-4 glassmorphism-box shadow-lg border-0 mx-auto" style="max-width: 1000px;">

        <div class="col-md-3 col-sm-6">
            <label for="property_type" class="form-label text-white fw-bold">Type</label>
            <select name="property_type" id="property_type" class="form-select">
                <option value="">Any Type</option>
                {% for key, value in search_values.type %}
                    <option value="{{ key }}" {% if request.GET.property_type == key %}selected{% endif %}>{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="col-md-3 col-sm-6">
            <label for="city" class="form-label text-white fw-bold">City</label>
            <select name="city" id="city" class="form-select">
                <option value="">Any City</option>
                {% for city in search_values.city %}
                    <option value="{{ city }}" {% if request.GET.city == city %}selected{% endif %}>{{ city }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="col-md-3 col-sm-6">
            <label for="price" class="form-label text-white fw-bold">Max Price(â‚¦)</label>
            <input type="number" name="price" id="price" placeholder="Max Price (e.g., 50000000)" class="form-control" value="{{ request.GET.price }}">
        </div>

        <div class="col-md-3 col-sm-6">
            <label for="agent" class="form-label text-white fw-bold">Agent</label>
            <select name="agent" id="agent" class="form-select">
                <option value="">Any Agent</option>
                {% for agent in agents %}
                    <option value="{{ agent.id }}" {% if request.GET.agent|floatformat:"0" == agent.id|floatformat:"0" %}selected{% endif %}>{{ agent.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="col-12 text-center mt-4">
            <button type="submit" class="btn btn-accent px-5 py-2 fw-bold">
                <i class="fas fa-search me-2"></i> Search Listings
            </button>
        </div>
    </div>
</form>